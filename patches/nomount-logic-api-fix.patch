--- a/fs/vfs_dcache.c
+++ b/fs/vfs_dcache.c
@@ -2009,7 +2009,7 @@
 	dir_path = d_path(&file->f_path, page_buf, PAGE_SIZE);
 	if (IS_ERR(dir_path)) {
 		NM_DBG("inject_dents64: d_path failed (err=%ld)\n", PTR_ERR(dir_path));
-		free_page((unsigned long)page_buf);
+		__putname(page_buf);
 		return;
 	}
 
@@ -2085,7 +2085,7 @@
 	dir_path = d_path(&file->f_path, page_buf, PAGE_SIZE);
 	if (IS_ERR(dir_path)) {
 		NM_DBG("inject_dents: d_path failed (err=%ld)\n", PTR_ERR(dir_path));
-		free_page((unsigned long)page_buf);
+		__putname(page_buf);
 		return;
 	}
 
